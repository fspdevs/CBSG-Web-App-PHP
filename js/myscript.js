var p={0:"500K",1:"550K",2:"600K",3:"650K",4:"700K",5:"750K",6:"800K",7:"850K",8:"900K",9:"950K",10:"1M",11:"1.1M",12:"1.2M",13:"1.3M",14:"1.4M",15:"1.5M",16:"1.6M",17:"1.7M",18:"1.8M",19:"1.9M",20:"2M",21:"2.1M",22:"2.2M",23:"2.3M",24:"2.4M",25:"2.5M",26:"2.6M",27:"2.7M",28:"2.8M",29:"2.9M",30:"3M",31:"3.1M",32:"3.2M",33:"3.3M",34:"3.4M",35:"3.5M",36:"3.6M",37:"3.7M",38:"3.8M",39:"3.9M",40:"4M",41:"4.1M",42:"4.2M",43:"4.3M",44:"4.4M",45:"4.5M",46:"4.6M",47:"4.7M",48:"4.8M",49:"4.9M",50:"5M",51:"5.1M",52:"5.2M",53:"5.3M",54:"5.4M",55:"5.5M",56:"5.6M",57:"5.7M",58:"5.8M",59:"5.9M",60:"6M",61:"6.1M",62:"6.2M",63:"6.3M",64:"6.4M",65:"6.5M",66:"6.6M",67:"6.7M",68:"6.8M",69:"6.9M",70:"7M",71:"7.1M",72:"7.2M",73:"7.3M",74:"7.4M",75:"7.5M",76:"7.6M",77:"7.7M",78:"7.8M",79:"7.9M",80:"8M",81:"8.1M",82:"8.2M",93:"8.3M",84:"8.4M",85:"8.5M",86:"8.6M",87:"8.7M",88:"8.8M",89:"8.9M",90:"9M",91:"9.1M",92:"9.2M",93:"9.3M",94:"9.4M",95:"9.5M",96:"9.6M",97:"9.7M",98:"9.8M",99:"9.9M",100:"10M",};
var t={0:"500000",1:"550000",2:"600000",3:"650000",4:"700000",5:"750000",6:"800000",7:"850000",8:"900000",9:"950000",10:"1000000",11:"1100000",12:"1200000",13:"1300000",14:"1400000",15:"1500000",16:"1600000",17:"1700000",18:"1800000",19:"1900000",20:"2000000",21:"2100000",22:"2200000",23:"2300000",24:"2400000",25:"2500000",26:"2600000",27:"2700000",28:"2800000",29:"2900000",30:"3000000",31:"3100000",32:"3200000",33:"3300000",34:"3400000",35:"3500000",36:"3600000",37:"3700000",38:"3800000",39:"2900000",40:"4000000",41:"4100000",42:"4200000",43:"4300000",44:"4400000",45:"4500000",46:"4600000",47:"4700000",48:"4800000",49:"4900000",50:"5000000",51:"5100000",52:"5200000",53:"5300000",54:"5400000",55:"5500000",56:"5600000",57:"5700000",58:"5800000",59:"5900000",60:"6000000",61:"6100000",62:"6200000",63:"6300000",64:"6400000",65:"6500000",66:"6600000",67:"6700000",68:"6800000",69:"6900000",70:"7000000",71:"7100000",72:"7200000",73:"7300000",74:"7400000",75:"7500000",76:"7600000",77:"7700000",78:"7800000",79:"7900000",80:"8000000",81:"8100000",82:"8200000",83:"8300000",84:"8400000",85:"8500000",86:"8600000",87:"8700000",88:"8800000",89:"8900000",90:"9000000",91:"9100000",92:"9200000",93:"9300000",94:"9400000",95:"9500000",96:"9600000",97:"9700000",98:"9800000",99:"900000",100:"10000000",};

var distArray = {
    "monthly" : "0.0125",
    "quarterly" : "0.04375",
    "annually" : "0.2"
};

var rateArray = {
    "monthly" : "0.15",
    "quarterly" : "0.175",
    "annually" : "0.2"
};

var yearArray = {
    "12month" : "1",
    "24month" : "2",
    "36month" : "3"
};

$(window).load( function () {

    
    $("#total").val("10000");

    $('#24month').addClass('active');

    $("#slider").slider({
        range: "min",
        animate: true,
        min: 0,
        max: 100,
        step: 1,
        slide: 
            function(event, ui) 
            {
                update(1,ui.value); //changed
                calculatePrice(ui.value);
            }
    });



    $('.month').on('click',function(event) {
        var id = $(this).attr('id');

        $('.month').removeClass('active');
        $(this).addClass('active');

        $('#month').val(id);

        calculatePrice()
    });

    $('.term').on('click',function(event) {
        var id = $(this).attr('id');

        $('.term').removeClass('selected-term');
        $(this).addClass('selected-term');
        $('#term').val(id);

        calculatePrice()
    });

    update();
    calculatePrice();
});
        
function format(num) {
    num = num.toString().replace(/\$|\,/g,'');

    if(isNaN(num))
       num = "0";
    sign = (num == (num = Math.abs(num)));
    num = Math.floor(num*100+0.50000000001);
    cents = num%100;
    num = Math.floor(num/100).toString();

    if(cents<10)
     cents = "0" + cents;
    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)
       num = num.substring(0,num.length-(4*i+3))+','+
       num.substring(num.length-(4*i+3));

    return ('$' + num);
}
        
function update(slider,val) {

    if(undefined === val) val = 0;
    var amount = p[val];

    $('#sliderVal').val(val);

    $('#slider a').html('<i class="fa fa-usd"></i>'+amount);
}

function calculatePrice(val){
    
    if(undefined === val)
        val = $('#sliderVal').val();
    
    var term = $('#term').val();
    var month = $('#month').val();

    var totalPrice = t[val]*distArray[term];
    var newVal = format(totalPrice.toFixed(0));

    $("#total").val(newVal);

    var newVal = format(t[val]);
    $("#totalX").val(newVal);
    $("#total12").val(format(Math.round(t[val]*rateArray[term]).toFixed(0)));
    
   $("#totalY").val(format(Math.round(t[val]*rateArray[term]*yearArray[month]).toFixed(0)));
}